#  Clase 6: Renderizado Din√°mico de Arreglos Locales en React y Next.js

El renderizado din√°mico de arreglos locales es una pr√°ctica com√∫n en **React** y **Next.js** para mostrar listas de datos en la interfaz de usuario. Esto se logra principalmente utilizando el m√©todo `.map()` de JavaScript, fragmentos (`<></>`) para agrupar elementos sin nodos adicionales en el DOM, y la prop `key` para optimizar el rendimiento y evitar problemas de reconciliaci√≥n en el DOM virtual. Este documento explica en detalle c√≥mo implementar el renderizado din√°mico de arreglos locales en componentes de React dentro de un proyecto Next.js, incluyendo ejemplos pr√°cticos, buenas pr√°cticas y el uso de **Tailwind CSS** para estilos. Los ejemplos se basan en una aplicaci√≥n de tienda en l√≠nea que muestra una lista de productos.

---

## Conceptos clave

### 1. Renderizado din√°mico con `.map()`
El m√©todo `.map()` de JavaScript itera sobre un arreglo y devuelve un nuevo arreglo con los elementos transformados. En React, se usa para generar elementos JSX din√°micamente a partir de un arreglo de datos.

- **Uso**: Transforma cada elemento del arreglo en un componente o elemento JSX.
- **Ejemplo**: `array.map(item => <div>{item}</div>)`

### 2. Fragmentos (`<></>` o `<React.Fragment>`)
Los fragmentos permiten agrupar m√∫ltiples elementos JSX sin introducir un nodo adicional en el DOM (como un `<div>`).

- **Uso**: Envolver m√∫ltiples elementos devueltos por `.map()` para cumplir con la regla de React de devolver un solo elemento.
- **Ventaja**: Reduce el clutter en el DOM, mejorando el rendimiento y la sem√°ntica.
- **Ejemplo**: `<>{array.map(item => <div>{item}</div>)}</>`

### 3. Prop `key`
La prop `key` es un identificador √∫nico que React usa para optimizar la reconciliaci√≥n del DOM virtual, evitando renders innecesarios y manteniendo el estado de los componentes.

- **Uso**: Se asigna a cada elemento generado por `.map()` usando un valor √∫nico (como un ID).
- **Regla**: No uses √≠ndices del arreglo (`index`) como `key` si los datos pueden cambiar (ordenar, agregar, eliminar), ya que puede causar problemas de rendimiento o comportamiento inesperado.
- **Ejemplo**: `<div key={item.id}>{item.nombre}</div>`

---

## Configuraci√≥n del proyecto en Next.js

Antes de los ejemplos, configuraremos un proyecto Next.js con Tailwind CSS para estilizar los componentes.

### Crear un proyecto Next.js

1. Crea un nuevo proyecto Next.js:
   ```bash
   npx create-next-app@latest mi-tienda
   cd mi-tienda
   ```

2. Instala Tailwind CSS:
   ```bash
   npm install -D tailwindcss postcss autoprefixer
   npx tailwindcss init -p
   ```

3. Configura `tailwind.config.js`:
   ```javascript
   /** @type {import('tailwindcss').Config} */
   module.exports = {
     content: [
       "./app/**/*.{js,ts,jsx,tsx}",
       "./pages/**/*.{js,ts,jsx,tsx}",
       "./components/**/*.{js,ts,jsx,tsx}",
     ],
     theme: {
       extend: {},
     },
     plugins: [],
   }
   ```

4. Agrega las directivas de Tailwind en `app/globals.css`:
   ```css
   @tailwind base;
   @tailwind components;
   @tailwind utilities;
   ```

5. Aseg√∫rate de que `package.json` incluya las dependencias necesarias:
   ```json
   {
     "dependencies": {
       "next": "14.2.14",
       "react": "18.3.1",
       "react-dom": "18.3.1"
     },
     "devDependencies": {
       "tailwindcss": "^3.4.13",
       "postcss": "^8.4.47",
       "autoprefixer": "^10.4.20"
     }
   }
   ```

---

## Ejemplo pr√°ctico: Lista de productos

Crearemos un componente que renderiza din√°micamente una lista de productos almacenada en un arreglo local. Usaremos `.map()`, fragmentos, y la prop `key`, con estilos de Tailwind CSS.

### C√≥digo del componente

#### Archivo: `components/ProductList.jsx`

```jsx
import React from 'react';

const products = [
  { id: 1, name: 'Laptop', price: 999.99, category: 'Electr√≥nica' },
  { id: 2, name: 'Smartphone', price: 699.99, category: 'Electr√≥nica' },
  { id: 3, name: 'Zapatillas', price: 89.99, category: 'Moda' },
  { id: 4, name: 'Libro', price: 19.99, category: 'Libros' },
];

const ProductList = () => {
  return (
    <div className="max-w-4xl mx-auto p-4">
      <h1 className="text-3xl font-bold mb-6 text-center">Lista de Productos</h1>
      <>
        {products.map((product) => (
          <div
            key={product.id}
            className="bg-white shadow-md rounded-lg p-4 mb-4 flex justify-between items-center"
          >
            <div>
              <h2 className="text-xl font-semibold">{product.name}</h2>
              <p className="text-gray-600">Categor√≠a: {product.category}</p>
            </div>
            <p className="text-lg font-bold text-green-600">${product.price.toFixed(2)}</p>
          </div>
        ))}
      </>
    </div>
  );
};

export default ProductList;
```

#### Archivo: `app/page.jsx`

```jsx
import ProductList from '../components/ProductList';

export default function Home() {
  return (
    <main>
      <ProductList />
    </main>
  );
}
```

### Explicaci√≥n del ejemplo

- **Arreglo local** (`products`):
  - Definimos un arreglo est√°tico de objetos que representan productos, cada uno con `id`, `name`, `price` y `category`.
  - En un escenario real, este arreglo podr√≠a provenir de una API o base de datos.

- **Uso de `.map()`**:
  - Iteramos sobre `products` con `.map()` para generar un `<div>` por cada producto.
  - Cada `<div>` muestra el nombre, categor√≠a y precio del producto.

- **Fragmentos (`<></>`)**:
  - Envolvemos los elementos generados por `.map()` en un fragmento (`<></>`) para cumplir con la regla de React de devolver un solo elemento ra√≠z.
  - Esto evita agregar un `<div>` innecesario en el DOM.

- **Prop `key`**:
  - Usamos `key={product.id}` para asignar un identificador √∫nico a cada `<div>`.
  - El `id` es √∫nico y estable, lo que ayuda a React a rastrear los elementos y optimizar las actualizaciones.

- **Estilos con Tailwind CSS**:
  - Usamos clases de Tailwind como `max-w-4xl`, `mx-auto`, `p-4`, `shadow-md`, etc., para centrar el contenido, agregar sombras, bordes redondeados y estilos responsivos.
  - Los productos se muestran en tarjetas con un dise√±o limpio y moderno.

- **Estructura del DOM**:
  - El componente genera una lista de tarjetas, cada una representando un producto, sin nodos adicionales gracias al fragmento.

---

## Variaciones y casos avanzados

### 1. Renderizado condicional dentro de `.map()`
A veces, necesitas renderizar elementos solo si cumplen ciertas condiciones. Por ejemplo, mostrar solo productos de una categor√≠a espec√≠fica.

#### C√≥digo

```jsx
import React from 'react';

const products = [
  { id: 1, name: 'Laptop', price: 999.99, category: 'Electr√≥nica' },
  { id: 2, name: 'Smartphone', price: 699.99, category: 'Electr√≥nica' },
  { id: 3, name: 'Zapatillas', price: 89.99, category: 'Moda' },
  { id: 4, name: 'Libro', price: 19.99, category: 'Libros' },
];

const ProductList = () => {
  return (
    <div className="max-w-4xl mx-auto p-4">
      <h1 className="text-3xl font-bold mb-6 text-center">Productos Electr√≥nicos</h1>
      <>
        {products.map((product) =>
          product.category === 'Electr√≥nica' ? (
            <div
              key={product.id}
              className="bg-white shadow-md rounded-lg p-4 mb-4 flex justify-between items-center"
            >
              <div>
                <h2 className="text-xl font-semibold">{product.name}</h2>
                <p className="text-gray-600">Categor√≠a: {product.category}</p>
              </div>
              <p className="text-lg font-bold text-green-600">${product.price.toFixed(2)}</p>
            </div>
          ) : null
        )}
      </>
    </div>
  );
};

export default ProductList;
```

#### Explicaci√≥n
- **Condicional**: Dentro de `.map()`, usamos un operador ternario (`?:`) para renderizar solo los productos de la categor√≠a "Electr√≥nica". Si la condici√≥n no se cumple, devolvemos `null`, lo que no genera ning√∫n elemento en el DOM.
- **Fragmentos**: Seguimos usando `<></>` para envolver los elementos generados.
- **Key**: Cada elemento renderizado tiene un `key` basado en `product.id`.

---

### 2. Componente reutilizable para cada elemento
Para mejorar la modularidad, podemos extraer la l√≥gica de renderizado de cada producto a un componente separado.

#### C√≥digo

```jsx
// components/ProductItem.jsx
import React from 'react';

const ProductItem = ({ product }) => {
  return (
    <div className="bg-white shadow-md rounded-lg p-4 mb-4 flex justify-between items-center">
      <div>
        <h2 className="text-xl font-semibold">{product.name}</h2>
        <p className="text-gray-600">Categor√≠a: {product.category}</p>
      </div>
      <p className="text-lg font-bold text-green-600">${product.price.toFixed(2)}</p>
    </div>
  );
};

export default ProductItem;

// components/ProductList.jsx
import React from 'react';
import ProductItem from './ProductItem';

const products = [
  { id: 1, name: 'Laptop', price: 999.99, category: 'Electr√≥nica' },
  { id: 2, name: 'Smartphone', price: 699.99, category: 'Electr√≥nica' },
  { id: 3, name: 'Zapatillas', price: 89.99, category: 'Moda' },
  { id: 4, name: 'Libro', price: 19.99, category: 'Libros' },
];

const ProductList = () => {
  return (
    <div className="max-w-4xl mx-auto p-4">
      <h1 className="text-3xl font-bold mb-6 text-center">Lista de Productos</h1>
      <>
        {products.map((product) => (
          <ProductItem key={product.id} product={product} />
        ))}
      </>
    </div>
  );
};

export default ProductList;
```

#### Explicaci√≥n
- **Componente `ProductItem`**: Encapsula la l√≥gica de renderizado de un solo producto, recibiendo `product` como prop.
- **Reutilizaci√≥n**: `ProductList` usa `ProductItem` dentro de `.map()`, pasando cada `product` como prop.
- **Key**: La prop `key` se asigna en el nivel de `ProductItem` para mantener la optimizaci√≥n.
- **Ventajas**: Mejora la mantenibilidad y permite reutilizar `ProductItem` en otros contextos.

---

### 3. Manejo de arreglos vac√≠os
Es importante manejar casos donde el arreglo est√© vac√≠o para evitar mostrar una lista vac√≠a sin retroalimentaci√≥n al usuario.

#### C√≥digo

```jsx
import React from 'react';
import ProductItem from './ProductItem';

const products = []; // Arreglo vac√≠o para este ejemplo

const ProductList = () => {
  return (
    <div className="max-w-4xl mx-auto p-4">
      <h1 className="text-3xl font-bold mb-6 text-center">Lista de Productos</h1>
      {products.length === 0 ? (
        <p className="text-center text-gray-500">No hay productos disponibles.</p>
      ) : (
        <>
          {products.map((product) => (
            <ProductItem key={product.id} product={product} />
          ))}
        </>
      )}
    </div>
  );
};

export default ProductList;
```

#### Explicaci√≥n
- **Condicional**: Usamos un operador ternario para verificar si `products.length === 0`. Si est√° vac√≠o, mostramos un mensaje; si no, renderizamos la lista.
- **Fragmentos**: Cuando hay productos, usamos `<></>` para envolver los elementos generados por `.map()`.
- **Buena pr√°ctica**: Siempre proporcionar retroalimentaci√≥n al usuario cuando no hay datos.

---

## Tutorial: Condicionales en React con JavaScript y Operador Ternario

## Introducci√≥n

En React, las condicionales son fundamentales para crear interfaces din√°micas que respondan al estado de la aplicaci√≥n. Este tutorial te ense√±ar√° a usar funciones declarativas puras junto con JavaScript nativo para crear componentes que rendericen contenido de manera condicional.

Aprender√°s a:
- Usar el operador ternario para renderizado condicional
- Implementar l√≥gica compleja con JavaScript en JSX
- Crear funciones declarativas que reciban props
- Aplicar estilos din√°micos basados en condiciones
- Procesar datos usando m√©todos de arrays nativos

## 1. Fundamentos del Renderizado Condicional

### Operador Ternario B√°sico

El operador ternario es la forma m√°s com√∫n de renderizado condicional en React:

```jsx
function MensajeBienvenida({ usuario }) {
  return (
    <div>
      {usuario ? (
        <h1>¬°Bienvenido, {usuario.nombre}!</h1>
      ) : (
        <h1>Por favor, inicia sesi√≥n</h1>
      )}
    </div>
  );
}
```

### Renderizado Condicional con &&

Para mostrar algo solo cuando una condici√≥n es verdadera:

```jsx
function NotificacionError({ error }) {
  return (
    <div>
      {error && (
        <div style={{ color: 'red', padding: '10px', border: '1px solid red' }}>
          Error: {error}
        </div>
      )}
    </div>
  );
}
```

## 2. JavaScript Avanzado en JSX

### C√°lculos y Manipulaci√≥n de Datos

```jsx
function EjemploJavaScript({ datos = [] }) {
  // C√°lculos usando JavaScript nativo
  const fechaActual = new Date();
  const horaActual = fechaActual.getHours();
  const saludo = horaActual < 12 ? 'Buenos d√≠as' : horaActual < 18 ? 'Buenas tardes' : 'Buenas noches';
  
  // Procesamiento de arrays
  const numerosPositivos = datos.filter(num => num > 0);
  const suma = numerosPositivos.reduce((acc, num) => acc + num, 0);
  const promedio = numerosPositivos.length > 0 ? suma / numerosPositivos.length : 0;
  
  // Manipulaci√≥n de strings
  const textoFormateado = `Hoy es ${fechaActual.toLocaleDateString('es-ES')}`;
  
  return (
    <div style={{ padding: '20px', fontFamily: 'Arial, sans-serif' }}>
      <h2>{saludo} üëã</h2>
      <p>{textoFormateado}</p>
      
      {datos.length > 0 ? (
        <div>
          <p>Datos recibidos: {datos.join(', ')}</p>
          <p>N√∫meros positivos: {numerosPositivos.join(', ')}</p>
          <p>Suma: {suma}</p>
          <p>Promedio: {promedio.toFixed(2)}</p>
        </div>
      ) : (
        <p>No hay datos para mostrar</p>
      )}
      
      {/* Condicional basada en la hora */}
      <div style={{
        backgroundColor: horaActual < 6 || horaActual > 20 ? '#2c3e50' : '#3498db',
        color: 'white',
        padding: '10px',
        borderRadius: '5px',
        marginTop: '10px'
      }}>
        {horaActual < 6 || horaActual > 20 ? 'üåô Modo nocturno' : '‚òÄÔ∏è Modo diurno'}
      </div>
    </div>
  );
}
```

## 3. Ejemplo Pr√°ctico

### Sistema de Autenticaci√≥n

```jsx
function AppLogin({ usuario, onLogin, onLogout }) {
  return (
    <div style={{ maxWidth: '400px', margin: '0 auto', padding: '20px' }}>
      <h1>Mi Aplicaci√≥n</h1>
      {usuario ? (
        <ComponenteBienvenida usuario={usuario} onLogout={onLogout} />
      ) : (
        <ComponenteLogin onLogin={onLogin} />
      )}
    </div>
  );
}

function ComponenteBienvenida({ usuario, onLogout }) {
  const tiempoConectado = Date.now() - usuario.tiempoLogin;
  const minutosConectado = Math.floor(tiempoConectado / (1000 * 60));
  const esUsuarioVIP = usuario.tipo === 'premium';
  
  return (
    <div style={{
      backgroundColor: esUsuarioVIP ? '#f8f9fa' : '#ffffff',
      border: esUsuarioVIP ? '2px solid #ffd700' : '1px solid #dee2e6',
      borderRadius: '8px',
      padding: '20px'
    }}>
      <h2>¬°Bienvenido, {usuario.nombre}! {esUsuarioVIP && 'üëë'}</h2>
      <p>Email: {usuario.email}</p>
      <p>Tiempo conectado: {minutosConectado} minutos</p>
      
      {esUsuarioVIP && (
        <div style={{ backgroundColor: '#fff3cd', padding: '10px', borderRadius: '5px', marginBottom: '10px' }}>
          üåü Tienes acceso a funciones premium
        </div>
      )}
      
      <button 
        onClick={onLogout}
        style={{
          backgroundColor: '#dc3545',
          color: 'white',
          border: 'none',
          padding: '10px 20px',
          borderRadius: '5px',
          cursor: 'pointer'
        }}
      >
        Cerrar Sesi√≥n
      </button>
    </div>
  );
}

function ComponenteLogin({ onLogin }) {
  const handleLogin = () => {
    const usuarioDemo = {
      nombre: 'Juan P√©rez',
      email: 'juan@ejemplo.com',
      tipo: Math.random() > 0.5 ? 'premium' : 'regular',
      tiempoLogin: Date.now()
    };
    onLogin(usuarioDemo);
  };
  
  return (
    <div style={{ textAlign: 'center' }}>
      <h2>Iniciar Sesi√≥n</h2>
      <p>Haz clic para acceder con un usuario demo</p>
      <button 
        onClick={handleLogin}
        style={{
          backgroundColor: '#28a745',
          color: 'white',
          border: 'none',
          padding: '12px 24px',
          borderRadius: '5px',
          cursor: 'pointer',
          fontSize: '16px'
        }}
      >
        Acceder
      </button>
    </div>
  );
}
```






